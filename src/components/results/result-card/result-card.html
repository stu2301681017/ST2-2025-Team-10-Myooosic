<div class="card">
    @if (result.hasValue()) {

        <a href="{{result.value()?.song?.url}}">
            <img [src]="result.value()?.song?.picture">
        </a>

        <div class="content">
            <button mat-icon-button (click)="reload()" class="overlay reloadButton"><mat-icon fontIcon="refresh"></mat-icon></button>
            <h3 class="overlay">{{result.value()?.song?.name}}</h3>
            <p class="author overlay">{{result.value()?.song?.author}}</p>
            
            <span class="duration overlay">
            @if (length().hours > 0) {
                {{length().hours}}:{{length().minutes.toString().padStart(2, '0')}}:{{length().seconds.toString().padStart(2, '0')}}
            } @else {
                {{length().minutes}}:{{length().seconds.toString().padStart(2, '0')}}
            }
            </span>
            
            <div class="controls overlay">
                <audio #audioPlayer (play)="playAudio(audioPlayer)" controls [src]="result.value()?.song?.previewUrl"></audio>
            </div>
        </div>
        
        <p class="reason">{{result.value()?.reason}}</p>

    }

    @if (result.hasEmptyValue()) {
        <span>Nothing found...</span>
    }
    @if (result.isLoading()) {
        <mat-spinner class="spinner" diameter="60" color="primary"></mat-spinner>
    }
    @if (result.hasError()) {
        <span>Whoops!</span>
    }
    
</div>